/**
 * ngScreening v0.3.0
 *
 * @license: MIT
 * Designed and built by Moer
 * github   https://github.com/Moerj/ngScreening
 *
 */
!function(){"use strict";function e(e){return{restrict:"AE",scope:{data:"=",multiName:"@"},require:"^ngScreening",template:'<input type="button" class="screening-item btn"                     ng-class="{\'screening-item-checked\':mulitiActive}"                 /> |                 <input type="button" class="screening-item btn"                    ng-repeat="item in data"                    ng-class="{\'screening-item-checked\':item.isChecked}"                    ng-click="checkItem()"                    ng-if="!item.isHidden"                    ng-value="item.name"                    data-index="{{$index}}"                    data-this={{item}}                >',controller:["$scope",function(n){n.mulitiActive=!1,n.checkItem=function(){return this.item.isChecked=!this.item.isChecked,e||angular.forEach(n.data,function(e){e!=this.item&&(e.isChecked=!1)}.bind(this)),this.pCtrl.callback(),!1},n.mulitiToggle=function(){n.mulitiActive=!n.mulitiActive,angular.forEach(this.data,function(e){e.isChecked=n.mulitiActive}),this.pCtrl.callback()},n.$on("ngScreening-reset",function(){n.mulitiActive=!1,angular.forEach(n.data,function(e){e.isChecked&&(e.isChecked=!1)})})}],link:function(n,i,t,c){n.pCtrl=c;var r=i.children().eq(0);e?(n.multiName?r.val(n.multiName):r.val("全选"),n.mulitiActive=!1,r.on("click",function(){return n.mulitiToggle(),n.$apply(),!1})):n.multiName?r.val(n.multiName):r.val("单选")}}}var n=angular.module("ngScreening",[]);n.service("ngScreening",function(){return{getChecked:function(e){var n=[];return angular.forEach(e,function(e){e.isChecked&&!e.isHidden&&n.push(e)}),n},resize:function(e){if(e)e._screening_resize();else{var n=document.getElementsByClassName("screening");angular.forEach(n,function(e){e._screening_resize&&e._screening_resize()})}}}}),n.directive("ngScreening",function(){return{restrict:"EC",scope:{initrows:"@",callback:"&",search:"&",reset:"&"},replace:!0,transclude:!0,template:'<div class="ngScreening-start">                    <form class="ngScreening-container" ng-transclude></form>                    <div class="ngScreening-switch"><b></b><i class="ngScreening-hide"></i></div>                </div>',controller:["$scope",function(e){this.callback=function(){return e.callback()}}],link:function(e,n){setTimeout(function(){function i(){n.removeClass("ngScreening")}var t,c=angular.element(n[0].querySelector(".ngScreening-container")),r=c.next(),s=r.find("b"),a=r.find("i"),l=e.search,g=e.reset,o=e.initrows,u=c.children(),d=o>0&&o<u.length;if(n.attr("search")||void 0!==n.attr("reset")){if(t=angular.element('<div class="screening screening-buttons"></div>'),c.append(t),n.attr("search")){var h=angular.element('<button type="button" class="btn btn-primary btn-sm">搜索</button>');h.on("click",function(n){n.stopPropagation(),l(),e.$apply()}),t.append(h)}if(void 0!==n.attr("reset")){var f=angular.element('<button type="button" class="btn btn-default btn-sm">重置</button>');f.on("click",function(n){n.stopPropagation(),e.$broadcast("ngScreening-reset"),c[0].reset(),g(),e.$apply()}),t.append(f)}}r.on("click",function(){return d?(d=!1,s.toggleClass("ngScreening-hide"),a.toggleClass("ngScreening-hide"),c.children().removeClass("ngScreening-hide")):(c.toggleClass("ngScreening-hide"),s.toggleClass("ngScreening-hide"),a.toggleClass("ngScreening-hide")),!1}),0>=o||void 0==o?(r.remove(),i()):d?setTimeout(function(){s.toggleClass("ngScreening-hide"),a.toggleClass("ngScreening-hide");for(var e=o;e<u.length;e++)angular.element(u[e]).addClass("ngScreening-hide");t&&t.removeClass("ngScreening-hide"),i()},300):o!=u.length&&"all"!=o||i()})}}}),n.directive("screening",function(){return{restrict:"AE",scope:{label:"@",initrows:"@"},replace:!0,transclude:!0,require:"^ngScreening",template:'<div class="screening">                    <div class="screening-name" ng-hide="flexOnly">{{label}}</div>                    <div class="screening-container" ng-transclude></div>                    <div class="screening-switch ngScreening-hide"><b class="ngScreening-hide"></b><i></i></div>                </div>',controller:["$scope","$element",function(e,n){e.initHeight=n[0].clientHeight}],link:function(e,n){function i(){setTimeout(function(){c[0].offsetHeight>g?(s.removeClass("ngScreening-hide"),n.css({height:g+"px",overflow:"hidden"}),r&&n.css({height:"",overflow:""})):(s.addClass("ngScreening-hide"),n.css({height:"",overflow:""}))},300)}var t=e.initrows,c=angular.element(n[0].querySelector(".screening-container"));if(setTimeout(function(){var i=c.children(),t=!0;angular.forEach(i,function(e){var n=angular.element(e);t&&!n.hasClass("screening-flex")&&(t=!1)}),t?(e.flexOnly=t,n.css("padding-left","0")):angular.forEach(c.children(),function(e){e=angular.element(e),e.hasClass("screening-flex")&&setTimeout(function(){e.css("justify-content")||e.css("justify-content","center")})})}),t&&!(0>=t)){var r=!1,s=angular.element(n[0].querySelector(".screening-switch")),a=s.find("b"),l=s.find("i"),g=e.initHeight*t;s.on("click",function(){return r?n.css({height:g+"px",overflow:"hidden"}):n.css({height:"",overflow:""}),a.toggleClass("ngScreening-hide"),l.toggleClass("ngScreening-hide"),r=!r,!1}),n[0]._screening_resize=i;var o=!1;angular.element(window).on("resize",function(){o||n.hasClass("ngScreening-hide")||(o=!0,i(n[0]),setTimeout(function(){o=!1},500))}),i(n[0])}}}}),n.directive("screeningWatch",function(){return{restrict:"E",scope:{data:"="},require:"^ngScreening",link:function(e,n,i,t){n.remove(),e.$watch("data",function(e,n){n!=e&&e&&t.callback()}),e.$on("ngScreening-reset",function(){angular.isString(e.data)?e.data="":angular.isArray(e.data)?e.data=[]:e.data=null})}}}),n.directive("screeningEvent",function(){return{restrict:"A",scope:{event:"@screeningEvent"},require:"^ngScreening",replace:!0,link:function(e,n,i,t){var c=e.event?e.event:"change";n.on(c,function(){return t.callback(),!1})}}}),n.directive("screeningCheckbox",function(){return e(!0)}),n.directive("screeningRadio",function(){return e()}),n.directive("screeningDiv",function(){return{restrict:"E",scope:{width:"@",label:"@"},transclude:!0,replace:!0,template:'<div>            <span style="margin:0 10px 0 10px" ng-if="label">{{label}}</span>            <div class="screening-div" style="width:{{width}}" ng-transclude></div>        </div>'}}),n.directive("screeningFlex",function(){return{restrict:"E",scope:{width:"@",label:"@",justifyContent:"@"},transclude:!0,replace:!0,template:'<div class="screening-flex" style="justify-content:{{justifyContent}}">            <span class="screening-name" style="position:relative" ng-if="label">{{label}}</span>            <div style="width:{{width}};" ng-transclude></div>        </div>'}})}();