/**
 * ngScreening v1.0.1
 *
 * @license: MIT
 * Designed and built by Moer
 * github   https://github.com/Moerj/ngScreening
 *
 */
!function(){"use strict";function e(){setTimeout(function(){for(var e=document.getElementsByClassName("screening"),n=0;n<e.length;n++)e[n]._screening_resize&&e[n]._screening_resize()})}function n(e){return{restrict:"AE",scope:{data:"=",multiName:"@"},replace:!0,require:"^ngScreening",transclude:!0,template:'<div class="screening-itembox">                <input type="button" class="screening-item screening-btn" value="{{multiName}}"                    ng-class="{\'screening-item-checked\':mulitiActive}"                     ng-click="mulitiToggle()"                /> |                 <input type="button" class="screening-item screening-btn" value="{{multiName}}"                    ng-repeat="item in data"                    ng-class="{\'screening-item-checked\':item.isChecked}"                    ng-click="checkItem()"                    ng-if="!item.isHidden"                    ng-value="item.name"                    data-index="{{$index}}"                    data-this={{item}}                ><div ng-transclude class="itembox-other" style="display:inline-block"></div>                </div>',controller:["$scope",function(n){n.multiName||(n.multiName=e?"全选":"单选"),n.checkItem=function(){return this.item.isChecked=!this.item.isChecked,e||angular.forEach(n.data,function(e){e!=this.item&&(e.isChecked=!1)}.bind(this)),this.pCtrl.callback(),!1},n.mulitiActive=!1,n.mulitiToggle=function(){e&&(n.mulitiActive=!n.mulitiActive,angular.forEach(this.data,function(e){e.isChecked=n.mulitiActive}),this.pCtrl.callback())},n.$on("ngScreening-reset",function(){n.mulitiActive=!1,angular.forEach(n.data,function(e){e.isChecked&&(e.isChecked=!1)})})}],link:function(e,n,i,t){e.pCtrl=t}}}var i=angular.module("ngScreening",[]);i.service("ngScreening",function(){return{getChecked:function(e){var n=[];return angular.forEach(e,function(e){e.isChecked&&!e.isHidden&&n.push(e)}),n},resize:function(n){n?n._screening_resize():e()},toggle:function(e){if(e&&e._dotoggle)e._dotoggle();else for(var n=angular.element(document.querySelector(".ngScreening-start")),i=0;i<n.length;i++)n[i]._dotoggle&&n[i]._dotoggle()}}});var t=!1;angular.element(window).on("resize",function(){t||(t=!0,setTimeout(function(){e(),t=!1},200))}),i.directive("ngScreening",function(){return{restrict:"EC",scope:{initrows:"@",callback:"&",search:"&",reset:"&"},replace:!0,transclude:!0,template:'<div class="ngScreening-start">                    <form class="ngScreening-container" ng-transclude></form>                    <div ng-if="hasControl" class="ngScreening-control">                        <button ng-click="dosearch()" ng-if="hasSearch" type="button" class="screening-btn screening-btn-search">查询</button>                        <button ng-click="doreset()" ng-if="hasReset" type="button" class="screening-btn">重置</button>                        <div ng-if="hasSwitch" ng-style="switchStyle" class="ngScreening-switch"><b></b><i class="ngScreening-hide"></i></div>                    </div>                </div>',controller:["$scope","$attrs",function(e,n){this.callback=function(){return e.callback()},e.dosearch=function(){e.search()},e.doreset=function(){e.$broadcast("ngScreening-reset"),e.container[0].reset(),e.reset()},n.search&&(e.hasSearch=!0),void 0!==n.reset&&(e.hasReset=!0),e.hasSearch||e.hasReset||(e.switchStyle={width:"80px",height:"46px"}),e.initrows&&(e.hasSwitch=!0),e.hasControl=e.hasSearch||e.hasReset||e.hasSwitch}],link:function(e,n){setTimeout(function(){function i(){n.removeClass("ngScreening")}var t=e.container=angular.element(n[0].querySelector(".ngScreening-container")),c=angular.element(n[0].querySelector(".ngScreening-switch")),r=c.find("b"),s=c.find("i"),a=e.initrows,l=t.children(),g=a>0&&a<l.length;n[0]._dotoggle=function(){g?(g=!1,r.toggleClass("ngScreening-hide"),s.toggleClass("ngScreening-hide"),t.children().removeClass("ngScreening-hide")):(angular.forEach(t.children(),function(e){void 0===e.attributes.important&&(angular.element(e).toggleClass("ngScreening-hide"),e._screening_resize())}),r.toggleClass("ngScreening-hide"),s.toggleClass("ngScreening-hide"))},c.on("click",function(){return n[0]._dotoggle(),!1}),g?setTimeout(function(){r.toggleClass("ngScreening-hide"),s.toggleClass("ngScreening-hide");for(var e=a;e<l.length;e++)angular.element(l[e]).addClass("ngScreening-hide");i()},300):i()})}}}),i.directive("screening",function(){return{restrict:"AE",scope:{label:"@",initrows:"@"},replace:!0,transclude:!0,require:"^ngScreening",template:'<div class="screening" >                    <div class="screening-name" ng-hide="flexOnly">{{label}}</div>                    <div class="screening-container" ng-transclude></div>                    <div class="screening-switch ngScreening-hide"><b class="ngScreening-hide"></b><i></i></div>                </div>',controller:["$scope","$element",function(e,n){e.initHeight=n[0].clientHeight}],link:function(e,n){function i(){if("-1"==e.initrows)return void s.addClass("ngScreening-hide");var i=parseInt(c[0].offsetHeight);i>=2*g?(s.removeClass("ngScreening-hide"),r?n.css(o):n.css(u)):(s.addClass("ngScreening-hide"),n.css(o))}var t=e.initrows||1,c=angular.element(n[0].querySelector(".screening-container")),r=!1,s=angular.element(n[0].querySelector(".screening-switch")),a=s.find("b"),l=s.find("i"),g=parseInt(e.initHeight*t),o={height:"",overflow:"visible"},u={height:g+"px",overflow:"hidden"};setTimeout(function(){var i=c.children(),t=!0;angular.forEach(i,function(e){var n=angular.element(e);t&&!n.hasClass("screening-flex")&&(t=!1)}),t?(e.flexOnly=t,n.css("padding-left","0")):angular.forEach(c.children(),function(e){e=angular.element(e),e.hasClass("screening-flex")&&setTimeout(function(){e.css("justify-content")||e.css("justify-content","center")})})}),n[0]._screening_resize=i,s.on("click",function(){return r?n.css(u):n.css(o),a.toggleClass("ngScreening-hide"),l.toggleClass("ngScreening-hide"),r=!r,!1});var d=e.$watch(function(){return c[0].offsetHeight},function(e,n){e!=n&&(d(),i())})}}}),i.directive("screeningWatch",function(){return{restrict:"E",scope:{data:"="},require:"^ngScreening",link:function(e,n,i,t){n.remove(),e.$watch("data",function(e,n){n!=e&&e&&t.callback()}),e.$on("ngScreening-reset",function(){angular.isString(e.data)?e.data="":angular.isArray(e.data)?e.data=[]:e.data=null})}}}),i.directive("screeningEvent",function(){return{restrict:"A",scope:{event:"@screeningEvent"},require:"^ngScreening",replace:!0,link:function(e,n,i,t){var c=e.event?e.event:"change";n.on(c,function(){return t.callback(),!1})}}}),i.directive("screeningCheckbox",function(){return n(!0)}),i.directive("screeningRadio",function(){return n()}),i.directive("screeningDiv",function(){return{restrict:"E",scope:{width:"@",label:"@"},transclude:!0,replace:!0,template:'<div class="screening-div">            <span class="screening-div-name" style="margin:0 10px 0 10px" ng-if="label">{{label}}</span>            <div class="screening-div-contanier" style="width:{{width}};" ng-transclude></div>        </div>'}}),i.directive("screeningFlex",function(){return{restrict:"E",scope:{width:"@",label:"@",justifyContent:"@"},transclude:!0,replace:!0,template:'<div class="screening-flex" style="justify-content:{{justifyContent}}">            <span class="screening-name" style="position:relative" ng-if="label">{{label}}</span>            <div style="width:{{width}};display:flex;align-items:center;" ng-transclude></div>        </div>'}}),i.directive("screeningToggle",["ngScreening",function(e){return{restrict:"A",scope:{screeningToggle:"@"},link:function(n,i,t){i.on("click",function(){var n,i=t.screeningToggle;i&&(n=document.querySelector(i)),e.toggle(n)})}}}])}();